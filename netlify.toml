# Netlify Configuration for Software Solutions Services
# =====================================================

[build]
  # No build command needed for static site
  publish = "."
  
  # Functions directory
  functions = "netlify/functions"

[functions]
  # Node.js version for serverless functions
  node_bundler = "esbuild"

# Headers for security
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    X-Content-Type-Options = "nosniff"
    Referrer-Policy = "strict-origin-when-cross-origin"

# PayFast ITN endpoint
[[redirects]]
  from = "/api/payfast-itn"
  to = "/.netlify/functions/payfast-itn"
  status = 200

# PayFast payment redirect endpoint
[[redirects]]
  from = "/api/payfast-redirect"
  to = "/.netlify/functions/payfast-redirect"
  status = 200

# =====================================================
# REQUIRED ENVIRONMENT VARIABLES
# =====================================================
# All environment variables must be set in the Netlify Dashboard.
# The application will throw runtime errors if any are missing.
# Do NOT set values here - this file must contain no secrets.
#
# -----------------------------------------------------
# Site Configuration:
# -----------------------------------------------------
#   SITE_URL               - Full base URL of the site (required)
#                            Example: https://your-site.netlify.app
#
# -----------------------------------------------------
# PayFast Payment Gateway:
# -----------------------------------------------------
#   PAYFAST_MODE           - Payment environment mode (required)
#                            Must be exactly "sandbox" or "live"
#                            Controls which credentials and endpoints are used
#
#   For SANDBOX mode (testing):
#     PAYFAST_SANDBOX_MERCHANT_ID    - Sandbox merchant ID (required when mode is sandbox)
#     PAYFAST_SANDBOX_MERCHANT_KEY   - Sandbox merchant key (required when mode is sandbox)
#     PAYFAST_SANDBOX_PASSPHRASE     - Sandbox passphrase (required, use "" if none)
#
#   For LIVE mode (production):
#     PAYFAST_LIVE_MERCHANT_ID       - Live merchant ID (required when mode is live)
#     PAYFAST_LIVE_MERCHANT_KEY      - Live merchant key (required when mode is live)
#     PAYFAST_LIVE_PASSPHRASE        - Live passphrase (required, use "" if none)
#
#   NOTE: Only the credentials for the active mode need to be set.
#         Unused mode credentials can remain unset.
#
# -----------------------------------------------------
# Local SQLite Database (via tunnel):
# -----------------------------------------------------
#   SSS_DB_API_URL         - URL to local database server (required)
#                            Example: https://your-tunnel.ngrok.io
#   SSS_DB_SECRET          - Shared secret for API authentication (required)
#                            Must be at least 32 characters
#
# -----------------------------------------------------
# Email Notifications:
# -----------------------------------------------------
#   EMAIL_API_KEY          - Email service API key (required)
#   EMAIL_SERVICE          - Email provider identifier (required)
#   NOTIFICATION_EMAIL     - Recipient for owner notifications (required)
#   FROM_EMAIL             - Verified sender address (required)
#   WHATSAPP_NUMBER        - Business WhatsApp number for client emails (optional)
#                            Example: (+27) 68 659 2320
